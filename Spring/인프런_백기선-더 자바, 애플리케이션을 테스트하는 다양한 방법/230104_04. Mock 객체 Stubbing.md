> âš¡ ìƒê°ëŒ€ë¡œ ì‚´ì§€ ì•Šìœ¼ë©´ ì‚¬ëŠ”ëŒ€ë¡œ ìƒê°í•œë‹¤.
> âš¡ ë‚˜ëŠ” ì–´ì°¨í”¼ ì˜ ë  ë†ˆì´ë‹¤. ì´ë¯¸ ì˜ ë˜ê³  ìˆê³ , ê³„ì†í•´ì„œ ì˜ ë˜ê³  ìˆë‹¤.

---

ëª¨ë“  Mock ê°ì²´ì˜ í–‰ë™
* Nullì„ ë¦¬í„´í•œë‹¤. (Optional íƒ€ì…ì€ Optional.empty ë¦¬í„´)
* Primitive íƒ€ì…ì€ ê¸°ë³¸ Primitive ê°’.
* ì½œë ‰ì…˜ì€ ë¹„ì–´ìˆëŠ” ì½œë ‰ì…˜.
* Void ë©”ì†Œë“œëŠ” ì˜ˆì™¸ë¥¼ ë˜ì§€ì§€ ì•Šê³  ì•„ë¬´ëŸ° ì¼ë„ ë°œìƒí•˜ì§€ ì•ŠëŠ”ë‹¤.

í…ŒìŠ¤íŠ¸ ì½”ë“œì—ì„œ ë‹¤ìŒê³¼ ê°™ì€ ì½”ë“œê°€ ìˆë‹¤ê³  ê°€ì •í•˜ë©´,

```java

Memebr member = new Member();
member.setId(1L);
member.setEmail("SsangSoo@github.com);

when(memberService.findById(1L)).thenReturn(Optional.of(member));
```

> ì½”ë“œ ì„¤ëª…
`memberService.findById(1L);` ì´ ë©”ì„œë“œê°€ í˜¸ì¶œë  ë•Œ(when),
`Optional.of(member))` ê°’ì„ ë°˜í™˜í•´ë¼(thenReturn)
ëŠ” ì˜ë¯¸ì´ë‹¤.
> * when ë¶€ë¶„ì—ì„œ 1Lë¡œ ë“¤ì–´ê°€ëŠ” ê°’ì— `any()`ë¥¼ ë„£ì–´ì£¼ë©´, ì•„ë¬´ ê°’ì´ë‚˜ ë“¤ì–´ê°„ë‹¤. ê·¸ëŸ¬ë©´ ì–´ë–¤ ê°’ì„ ë„£ì–´ë„ ê°™ì€ ê°ì²´ê°€ ë‚˜ì˜¤ë„ë¡ ë˜ì–´ìˆë‹¤. 
> ì´ ë¶€ë¶„ì˜ ë°‘ì— ì°¸ê³  ë ˆí¼ëŸ°ìŠ¤ì˜ `Argument matchers` ìª½ì—ì„œ ë³´ë‹¤ ìì„¸íˆ í™•ì¸ ê°€ëŠ¥í•˜ë‹¤!
>
> ğŸ’¡ìœ ì˜í•  ë¶€ë¶„ì€ ë°˜ë“œì‹œ 1Lì´ ë“¤ì–´ê°€ì•¼ thenReturn()ì˜ ê°’ì— ë“¤ì–´ê°„ ê°’ì´ ë‚˜ì˜¨ë‹¤. 1ì´ ì•„ë‹ˆë¼ ë‹¤ë¥¸ ê°’ì´ ë“¤ì–´ê°€ë©´ ì•„ë¬´ ì¼ë„ ì¼ì–´ë‚˜ì§€ ì•ŠëŠ”ë‹¤.
>![](https://velog.velcdn.com/images/tjdtn4484/post/a9b93a59-d9a3-437b-ad1a-67a73d3c28af/image.png)

* Mock ê°ì²´ë¥¼ ì¡°ì‘í•´ì„œ íŠ¹ì •í•œ ë§¤ê°œë³€ìˆ˜ë¥¼ ë°›ì€ ê²½ìš° íŠ¹ì •í•œ ê°’ì„ ë¦¬í„´í•˜ê±°ë‚˜ ì˜ˆì™¸ë¥¼ ë˜ì§€ë„ë¡ ë§Œë“¤ ìˆ˜ ìˆë‹¤.
  * ì°¸ê³  ë ˆí¼ëŸ°ìŠ¤
    * [How about some stubbing?](https://javadoc.io/doc/org.mockito/mockito-core/latest/org/mockito/Mockito.html#2)
    * [Argument matchers](https://javadoc.io/doc/org.mockito/mockito-core/latest/org/mockito/Mockito.html#3)

* Void ë©”ì†Œë“œ íŠ¹ì • ë§¤ê°œë³€ìˆ˜ë¥¼ ë°›ê±°ë‚˜ í˜¸ì¶œëœ ê²½ìš° ì˜ˆì™¸ë¥¼ ë°œìƒ ì‹œí‚¬ ìˆ˜ ìˆë‹¤.
  * ì°¸ê³  ë ˆí¼ëŸ°ìŠ¤
    * [Subbing void methods with exceptions](https://javadoc.io/doc/org.mockito/mockito-core/latest/org/mockito/Mockito.html#5)

* ë©”ì„œë“œê°€ ë™ì¼í•œ ë§¤ê°œë³€ìˆ˜ë¡œ ì—¬ëŸ¬ë²ˆ í˜¸ì¶œë  ë•Œ ê°ê¸° ë‹¤ë¥´ê²Œ í–‰ë™í˜¸ë„ë¡ ì¡°ì‘í•  ìˆ˜ë„ ìˆë‹¤.
```java
when(memberService.findById(any()))
	.thenReturn(Optional.of(member))
    .thenThrow(new RuntimeException())
    .thenReturn(Optional.empty())
;

Optional<Member> byId = memberService.findById(1L);
assertEquals("SsangSoo@github.com", byId.get().getEmail());

assertThrows(RuntimeException.class, () -> {
	memberService.findById(2L);
});

assertEquals(Optional.empty(), memberService.findById(3L));
```
ì´ëŸ° ì‹ìœ¼ë¡œ ì‚¬ìš©ê°€ëŠ¥í•˜ë‹¤.
whenìª½ì„ ì„¤ì •í•´ë†“ê³ , ì•„ë˜ì—ì„œ í…ŒìŠ¤íŠ¸ë¥¼ ìˆ˜í–‰í•˜ê²Œ í•˜ë©´ ëœë‹¤.

  * ì°¸ê³  ë ˆí¼ëŸ°ìŠ¤
    * [Stubbing consecutive calls](https://javadoc.io/doc/org.mockito/mockito-core/latest/org/mockito/Mockito.html#10)

---
|thenë©”ì„œë“œ|ì„¤ëª…|
|-|-|
|**thenThrow()**|whenì˜ ê°’ì´ ë‚˜ì˜¬ ë•Œ ì˜ˆì™¸ë¥¼ ë˜ì ¸ë¼|
|**thenReturn()**|whenì˜ ê°’ì´ ë‚˜ì˜¬ ë•Œ ì§€ì •í•œ ê°’(stub ê°’)ì„ ë°˜í™˜í•´ë¼|

---

|void ë©”ì„œë“œ|ì„¤ëª…|
|-|-|
|**doThrow()**|ì§€ì •í•œ ì˜ˆì™¸ë¥¼ ë˜ì ¸ë¼.|

> #### doThrow()ì˜ˆì‹œ.
> ```java
doThrow(IllegalArgumentException())
	.when(memberService).validate(1L);
```
>`1ì´ë¼ëŠ” ê°’ìœ¼ë¡œ memberServiceì˜ validate ë©”ì„œë“œë¥¼ í˜¸ì¶œí•˜ê²Œ ë˜ë©´, IllegalAr gumentExceptionì„ ë˜ì ¸ë¼.`ëŠ” ì˜ë¯¸

---
-ë-
