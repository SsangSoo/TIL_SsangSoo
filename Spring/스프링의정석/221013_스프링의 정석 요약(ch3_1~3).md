# Intro
이해가 잘 되니, 재미있다...(아직은...그렇다..)
코드스테이츠에서 오늘 내일 스프링`DI`개념을 학습하는데
부트나 레거시나 개념은 같기 때문에, 그냥 일단 좋은 강의 들은 후에 학습자료를 보기 위해서 스정만 봤다... <br>
스프링의 정석으로만 학습했다... `DI`..일단 재밌었다... 

예전 1회독시, 그냥 무지성 따라치기여서, 일단 듣는데 만족했다면, ch3파트는 나름 2회독인데, `지성 따라치기`하니 재밌다.
그리고 1회독 때 듣는 것과는 다르게, 오늘은
```
이건 이렇게 되겠는데?
이렇게 하려면 어떻게 되지?
아.. 이렇구나~ 
```
하면서, 코드를 봤다. 물론 모르는 메서드가 많이 나오긴했다만, 그냥 설명해주고, **중요한 것**은 DI의 흐름, 느낌이다. 흉내를 위한 코드가 중요한 것이 아니다..

~~쓰다보니 학습목표는 중요하다고 다시 한번 생각하게 된다..~~

여튼..흉내내기도 재미있는데, 흉내만 내도 재미있다니...다음 내용들도 재밌겠지..훗.
일단 흉내내기 파트는 다 끝나서, 블로깅 한다..

```
근데.. 오늘 DI 5강 다 볼 수 있을진 모르겠다..
재밌다곤 하는데, 졸리기도 한 건 비밀이 아니다..
```

> 참고로 마크다운 테이블 형식 알려주신 선생님께 이 자리를 빌어서 다시 감사합니다...정리 정말 깔끔해집니다 ㅋ



> 나는 어차피 잘 될 것이고, 잘 되고 있고, 이미 잘 되어 있고, 나중엔 겁나게 잘 될 것이다.

말이 길었다.. 가보자.


### Start!

---

# DI
* OOP(Object Oriented Programming : 객체지향 프로그래밍)의 목적에 맞게 프로그램을 만들이 위해서 나온 개념.

## 1. 변경에 유리한 코드
  1. 다형성(factory method)을 이용함.
  2. Map과 외부 파일.
- 외부의 파일을 읽어와서 정보룰 이용해서 객체를 만듬.

## 2. 객체 컨테이너(ApplicationContext) 만들기
* 객체 컨테이너란는 곧 저장소를 뜻함.
  * 클래스 안에 Map을 가지고 있음(객체 저장소)

* 자바Bean(콩) = 객체
  * 객체는 객체지만, 자바빈이 정의하는 규칙이있음.
  * 스프링에서 Bean이란 용어를 자주 쓴다고 한다. 
  ``` 
  아직 더 봐야 할 부분인 것 같다.
  ```


## 3. 자동 객체 등록하기 - Component Scanning
* 클래스 앞에 `@Component` 애너테이션을 붙임.
* 흐름
  1. 특정 메서드를 통해서 패키지를 지정
  2. 지정된 패키지에서 클래스들을 찾다가, `@Component` 애너테이션이 붙은 것을 찾았으면,
  3. 객체를 생성헤서 map에 저장한다.

> 패키지 내의 모든 클래스를 읽어서 @Component 애너테이션이 붙은 클래스를 Set에 저장 

```
@Component 애너테이션은 guava 라이브러리를 이용한 것.
guava는 자바의 Reflection을 좀 더 쉽게 사용할 수 있게 도와주는 Library
참고.
```

* 외부파일을 이용해서 객체를 생성할 수도 있지만, 
  * 주로 외부파일에서는 공통객체를 읽어온다.
* `@Component`애너테이션을 이용해서 생성하게 할 수도 있다. 
  

## 4.  객체 찾기 - by Name, by Type
```
getBean("이름");  	// 이름(id)로 찾기
getBean(Car.class);	// 타입으로 찾기 
```

이름으로 찾으려면, 앞에 예시같이 하면 되지만,
타입으로 찾으려면 `instanceof`으로 찾으면 된다.
`isInstance(Object obj)`를 사용하면됨.


## 5. 객체를 자동으로 연결하기(1) - @Autowired
객체를 포함하는 객체를 만들 때 우리는 수동으로 객체 참조를 연결했다.
```
포함 관게 생각..
```

수동으로 객체 참조를 연결한 것을 `@Autowired`애너테이션을 이용해서, 자동으로 연결시켜준다.

클래스 내부에 객체를 포함할 때, 객체 저장소에 있는 객체들을 찾아서 자동으로 연결해준다.

* `@Autowired`는 byName보단 byType을 이용.
  * `instanceof` (=`isInstance()`)

```
class Car { 
    Engine engine; 
    Door door;
}
```
위의 코드가 아래와 같이 사용가능
```
class Car {
    @Autowired Engine engine;
    @Autowired Door door;
}
```


## 6. 객체를 자동으로 연결하기(2) - @Resource
`@Resource`는 byName으로 객체저장소를 확인한다.

즉 객체 저장소가 `Map`형태로,

|Key|Value|
|-|-|
|Name1|0x100|
|Name2|0x200|

이런 식으로 있을 떄,  <br>
`@Resource`는 Key쪽을. <br>
`@Autowired`는 Value쪽을 찾는다.

```
class Car { 
    Engine engine; 
    Door door;
}
```
위의 코드가 아래와 같이 사용가능
```
class Car {
    @Resource Engine engine;
    @Resource Door door;
}
```

```
@Resource Engine engine;
```
해당 코드에서 생략된 것이 있는데...
``` 
@Resource(name="engine")
```
첫글자가 소문자로 된 것이 생략되어있다..(이름을 특정하지 않는다면..) <br>
이름 지정을 생략하면, 타입의 첫글자를 소문자를 바꾼 것을 이름으로 사용하여, Map형태로 된 객체 저장소에서 값을 찾는다.
